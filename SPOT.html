<script>
  let foundCount = 0;
  const totalDifferences = document.querySelectorAll('.spot').length;
  const statusText = document.getElementById('status');
  const timerDisplay = document.getElementById('timer');

  // Set countdown time (3 minutes = 180 seconds)
  let timeLeft = 180;

  // Display initial time
  function updateTimerDisplay() {
    const minutes = Math.floor(timeLeft / 60);
    const seconds = timeLeft % 60;
    timerDisplay.textContent = `Time left: ${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
  }

  updateTimerDisplay();

  // Countdown timer
  const timer = setInterval(() => {
    timeLeft--;
    updateTimerDisplay();

    if (timeLeft < 0) {
      clearInterval(timer);
      alert("⏰ Time's up! Try again.");
      // Optionally disable further clicking:
      document.querySelectorAll('.spot').forEach(spot => {
        spot.style.pointerEvents = 'none';
      });
    }
  }, 1000);

  // Handle clicks on difference spots
  document.querySelectorAll('.spot').forEach(spot => {
    spot.addEventListener('click', function () {
      if (this.dataset.found === "false") {
        this.classList.add('found');
        this.dataset.found = "true";
        foundCount++;
        statusText.textContent = `Differences found: ${foundCount}`;

        if (foundCount === totalDifferences) {
          clearInterval(timer); // Stop timer
          setTimeout(() => {
            alert(`🎉 Well done! You found all the differences with ${timeLeft} seconds left!`);
          }, 200);
        }
      }
    });
  });
</script>
