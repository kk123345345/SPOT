<script>
  let foundCount = 0;
  const totalDifferences = document.querySelectorAll('.spot').length;
  const statusText = document.getElementById('status');
  const timerDisplay = document.getElementById('timer');

  // Countdown Timer - 3 minutes = 180 seconds
  let timeLeft = 180;
  const timer = setInterval(() => {
    let minutes = Math.floor(timeLeft / 60);
    let seconds = timeLeft % 60;
    timerDisplay.textContent = `Time left: ${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
    timeLeft--;

    // Time's up
    if (timeLeft < 0) {
      clearInterval(timer);
      alert("⏰ Time's up! Try again.");
      // Optional: Disable further clicks
      document.querySelectorAll('.spot').forEach(spot => {
        spot.style.pointerEvents = 'none';
      });
    }
  }, 1000);

  // Spot click logic
  document.querySelectorAll('.spot').forEach(spot => {
    spot.addEventListener('click', function () {
      if (this.dataset.found === "false") {
        this.classList.add('found');
        this.dataset.found = "true";
        foundCount++;
        statusText.textContent = `Differences found: ${foundCount}`;

        if (foundCount === totalDifferences) {
          clearInterval(timer);
          setTimeout(() => {
            alert(`🎉 Well done! You found all the differences with ${timeLeft + 1} seconds left!`);
          }, 200);
        }
      }
    });
  });
</script>
